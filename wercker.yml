build:
    box: alpine
    docker: true
    steps:
    - script:
        name: Install docker
        code: apk --no-cache add docker
    - script:
        name: Install Curl
        code: apk --no-cache add curl
    - script:
        name: Explore the docker deamon
        code: |
          echo DOCKER_NETWORK_NAME=$DOCKER_NETWORK_NAME
          echo DOCKER_HOST=$DOCKER_HOST
          echo Running docker version
          docker version
          echo running docker ps
          docker ps
          echo running docker images
          docker images
          echo listening the docker networks
          docker network list
    - script:
        name: Create an image from Dockerfike using docker build
        code: |
          docker build -t docker.io/$USERNAME/direct-docker-golang:latest .
          echo running docker images
          docker images
    - script:
        name: start the new-created image using docker run
        code: |
          docker run --rm -d -p 5000:5000 --name testcontainer --network=$DOCKER_NETWORK_NAME docker.io/$USERNAME/direct-docker-golang:latest
          echo running docker ps
          docker ps
